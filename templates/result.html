{% extends "base.html" %}

{% block title %}暗号化URL生成サービス - 結果{% endblock %}

{% block content %}
<div class="result-container">
    <h2>暗号化URLが生成されました</h2>
    
    <div class="result-box">
        <div class="result-item">
            <h3>元のURL:</h3>
            <div class="url-display">
                <p id="original-url">{{ original_url }}</p>
                <button class="copy-btn" onclick="copyToClipboard('original-url')">コピー</button>
            </div>
        </div>
        
        <div class="result-item highlight-item">
            <h3>暗号化された短縮URL (TinyURL):</h3>
            <div class="url-display">
                <p id="tiny-url">{{ tiny_url }}</p>
                <button class="copy-btn" onclick="copyToClipboard('tiny-url')">コピー</button>
            </div>
        </div>
    </div>
    
    <div class="action-buttons">
        <a href="{{ url_for('index') }}" class="btn-back">新しいURLを生成</a>
    </div>
</div>

<script>
function copyToClipboard(elementId) {
    const text = document.getElementById(elementId).innerText;
    navigator.clipboard.writeText(text).then(function() {
        // 成功時の処理
        const btn = event.target;
        const originalText = btn.innerText;
        btn.innerText = "コピー完了!";
        setTimeout(function() {
            btn.innerText = originalText;
        }, 2000);
    }, function() {
        // エラー時の処理
        alert("コピーに失敗しました。");
    });
}
</script>
{% endblock %}